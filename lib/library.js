!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("library",[],t):"object"==typeof exports?exports.library=t():e.library=t()}(this,function(){return function(e){function t(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,o){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.createImageFromBitmapData=function(e,t,r,o,n){var i=new Image;i.src=t,i.onload=function(){e.cache.addImage(r,t,i),o()},i.onerror=function(){n&&n()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createImageFromBitmapData=t.ParticleEditorPlugin=void 0;var o=r(2),n=function(e){return e&&e.__esModule?e:{default:e}}(o),i=r(0);t.ParticleEditorPlugin=n.default,t.createImageFromBitmapData=i.createImageFromBitmapData},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=r(3),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(e,r){o(this,t);var i=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return i.addParticleFactory(),i}return i(t,e),a(t,[{key:"addParticleFactory",value:function(){var e=this;Phaser.GameObjectFactory.prototype.particle=function(t,r,o,n){var i=new u.default(e.game,e.getData(o),t,r);return(n||e.game.world).add(i)},Phaser.GameObjectCreator.prototype.particle=function(t,r,o){return new u.default(e.game,t,r,e.getData(o))}}},{key:"getData",value:function(e){return"string"==typeof e?this.game.cache.getJSON(e):e}}]),t}(Phaser.Plugin);t.default=c,e.exports=t.default},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var r=[],o=!0,n=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(e){n=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(n)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),u=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},c=r(4),s=function(e){return e&&e.__esModule?e:{default:e}}(c),p=r(0),f=function(e){function t(e,r,i,a){o(this,t);var l=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return l.x=i,l.y=a,l._emitersMap=new Map,l._collidebleEmitters=new Set,l._emitX=0,l._emitY=0,l._arcade=l.game.physics.arcade,l._initEmitters(r),l}return i(t,e),l(t,[{key:"_initEmitters",value:function(e){var t=e.emitters;for(var r in t)if(t.hasOwnProperty(r)){var o=t[r];this.addEmitter(r,o)}}},{key:"_createEmitter",value:function(e,t){return new s.default(this.game,e,t)}},{key:"add",value:function(e,r,o){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,r,o),this._emitersMap.set(e.name,e)}},{key:"remove",value:function(e,r,o){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this,e,r,o),this._emitersMap.delete(e.name)}},{key:"_emit",value:function(e,t){t.enabled&&(t.flow?e.flow(t.lifespan,t.frequency,t.quantity,t.total,t.immediate):e.start(t.explode,t.lifespan,t.frequency,t.total))}},{key:"update",value:function(){u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this);var e=!0,r=!1,o=void 0;try{for(var n,i=this._collidebleEmitters[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var a=n.value;this._arcade.collide(a)}}catch(e){r=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"_onEmitterImageUpdate",value:function(e,t){this._recreateEmitter(e,t)}},{key:"_recreateEmitter",value:function(e,t){this.removeEmitter(e),this.addEmitter(e,t)}},{key:"addEmitter",value:function(e,t){var r=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];(0,p.createImageFromBitmapData)(this.game,t[e],e,function(){var n=r._createEmitter(e,t);r.add(n),n.makeParticles(n.name,t.frames,500,t.collide,t.collideWorldBounds,t.particleArguments),r.updateEmitterProperties(e,t),o&&r._emit(n,t),t.collide||t.collideWorldBounds?r._collidebleEmitters.add(n):r._collidebleEmitters.delete(n)})}},{key:"removeEmitter",value:function(e){this.remove(this._emitersMap.get(e))}},{key:"updateEmitterImage",value:function(e,t){(0,p.createImageFromBitmapData)(this.game,t[e],e,this._onEmitterImageUpdate.bind(this,e,t))}},{key:"updateEmitterProperties",value:function(e,t){var r=this._emitersMap.get(e);r.applyProperties(t),this._emit(r,t)}},{key:"updateEmitterOption",value:function(e,t){this._recreateEmitter(e,t)}},{key:"emitX",get:function(){return this._emitX},set:function(e){this._emitX=e;var t=!0,r=!1,o=void 0;try{for(var n,i=this._emitersMap[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var l=n.value,u=a(l,2),c=(u[0],u[1]);c.emitX=c.properties.emitX+this.emitX}}catch(e){r=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw o}}}},{key:"emitY",get:function(){return this._emitY},set:function(e){this._emitY=e;var t=!0,r=!1,o=void 0;try{for(var n,i=this._emitersMap[Symbol.iterator]();!(t=(n=i.next()).done);t=!0){var l=n.value,u=a(l,2),c=(u[0],u[1]);c.emitY=c.properties.emitY+this.emitY}}catch(e){r=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw o}}}}]),t}(Phaser.Group);t.default=f,e.exports=t.default},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},u=r(5),c=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,r,i){o(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.emitX,i.emitY,i.maxParticles));return a.name=r,a.particleClass=c.default,a.applyProperties(i),a}return i(t,e),a(t,[{key:"applyProperties",value:function(e){this.properties=e,this.gravity.x=e.gravityX,this.gravity.y=e.gravityY,this.setRotation(e.rotationMin,e.rotationMax),this.emitX=e.emitX,this.emitY=e.emitY,this.maxParticles=e.maxParticles,this.setAlpha(e.alphaMin,e.alphaMax,e.alphaRate,Phaser.Easing[e.alphaEase][e.alphaEaseMode],e.alphaYoyo),e.proportional?(this.minParticleScale=e.minScale,this.maxParticleScale=e.maxScale):this.setScale(e.scaleFromX,e.scaleToX,e.scaleFromY,e.scaleToY,e.scaleRate,Phaser.Easing[e.scaleEase][e.scaleEaseMode],e.scaleYoyo),this.minParticleSpeed.setTo(e.minSpeedX,e.minSpeedY),this.maxParticleSpeed.setTo(e.maxSpeedX,e.maxSpeedY),this.lifespan=e.lifespan,this.angularDrag=e.angularDrag,this.bounce.setTo(e.bounceX,e.bounceY),this.width=e.width,this.height=e.height,e.explode||(this.on=e.enabled)}},{key:"resetParticle",value:function(e,r,o){if(this.properties.particleArguments&&this.properties.particleArguments.hasOwnProperty("color")){var n=this.properties.particleArguments.color;e.tint=Phaser.Color.getColor32(e.alpha,n.start.r,n.start.g,n.start.b)}l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resetParticle",this).call(this,e,r,o)}}]),t}(Phaser.Particles.Arcade.Emitter);t.default=s,e.exports=t.default},function(e,t,r){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,r,o){return r&&e(t.prototype,r),o&&e(t,o),t}}(),l=function e(t,r,o){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,r);if(void 0===n){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,o)}if("value"in n)return n.value;var a=n.get;if(void 0!==a)return a.call(o)},u=function(e){function t(e,r,i,a,l,u){o(this,t);var c=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,i,a,l));return c.particleArguments=u,c}return i(t,e),a(t,[{key:"onEmit",value:function(){if(this.particleArguments&&this.particleArguments.hasOwnProperty("color")){var e=this.particleArguments.color,r=Phaser.Color.createColor(e.start.r,e.start.g,e.start.b);this.game.add.tween(r).to(e.end,e.rate,Phaser.Easing[e.ease][e.easeMode],!0,e.delay).onUpdateCallback(this.updateColor.bind(this))}l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onEmit",this).call(this)}},{key:"updateColor",value:function(e){Phaser.Color.updateColor(e.target),this.tint=Phaser.Color.getColor32(this.alpha,e.target.r,e.target.g,e.target.b)}}]),t}(Phaser.Particle);t.default=u,e.exports=t.default}])});